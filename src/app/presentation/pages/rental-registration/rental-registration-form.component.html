<div class="container">
  <mat-card>
    <mat-card-title>Register a Rental</mat-card-title>
    <mat-card-content>
      <form [formGroup]="rentalForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Start Date</mat-label>
            <input matInput [matDatepicker]="startDatePicker" formControlName="startDate">
            <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #startDatePicker></mat-datepicker>
            <mat-error *ngIf="rentalForm.get('startDate')?.hasError('required')">Start Date is required</mat-error>
          </mat-form-field>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>End Date</mat-label>
            <input matInput [matDatepicker]="endDatePicker" formControlName="endDate">
            <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #endDatePicker></mat-datepicker>
            <mat-error *ngIf="rentalForm.get('endDate')?.hasError('required')">End Date is required</mat-error>
          </mat-form-field>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Selected Car</mat-label>
            <input matInput [value]="selectedCar()?.make + ' ' + selectedCar()?.model + ' - $' + selectedCar()?.dailyRate + '/day'" readonly>
          </mat-form-field>
        </div>

        <div *ngIf="selectedCar() && !isCarPreselected()" class="selected-car-details">
          <h3>Selected Car Details:</h3>
          <p><strong>Type:</strong> {{ selectedCar()?.make }}</p>
          <p><strong>Model:</strong> {{ selectedCar()?.model }}</p>
          <p><strong>Daily Rate:</strong> ${{ selectedCar()?.dailyRate | number:'1.2-2' }}</p>
        </div>

        <mat-divider></mat-divider>

        <h3>Customer Details</h3>
        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>DNI</mat-label>
            <input matInput formControlName="dni" (blur)="onDniChange()">
            <mat-error *ngIf="rentalForm.get('dni')?.hasError('required')">DNI is required</mat-error>
          </mat-form-field>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Full Name</mat-label>
            <input matInput formControlName="fullName" [readonly]="customerFound()">
            <mat-error *ngIf="rentalForm.get('fullName')?.hasError('required')">Full Name is required</mat-error>
          </mat-form-field>
        </div>

        <div class="form-group">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Address</mat-label>
            <input matInput formControlName="address" [readonly]="customerFound()">
            <mat-error *ngIf="rentalForm.get('address')?.hasError('required')">Address is required</mat-error>
          </mat-form-field>
        </div>

        <button mat-raised-button color="primary" type="submit" [disabled]="!rentalForm.valid">Register Rental</button>
      </form>
    </mat-card-content>
  </mat-card>
</div>